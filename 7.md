import requests

cookies = {
    'gd_random': 'eyJtYXRjaCI6dHJ1ZSwicGVyY2VudCI6MC4yMDAwNTU4NzU5OTcyMjQ0fQ==.n+bTAtBr7GvakgHXe1U13Nk1XERb2jg/0uYwkpHsw3Q=',
    'i18next': 'zh',
    'flow_ssr_sidebar_expand': '1',
    's_v_web_id': 'verify_mjq3ey5q_Lj1nCj1r_D0Gm_4tNR_8pam_GN7DVHiMj31h',
    'passport_mfa_token': 'CjaWFSB4QhRPWaoM1lws%2F1ABeGKzq0mQMrutjv4WENW01%2BV7fldO93vPCN7bc%2FS9t3%2FXsUzR9mAaSgo8AAAAAAAAAAAAAE%2FiQS7dozEqVT9%2Be7Ujt2tJB6O9BDjVo2ltqhZJzFJwqG4ovBHVi96ZsepmujtATRGeEI%2B2hQ4Y9rHRbCACIgEDlrDi8Q%3D%3D',
    'd_ticket': 'd0751484469188c6ac674ccb424a6ab71947b',
    'odin_tt': 'e8d2f21367fbecb16d1171eeea5cef74515a889aacd49c37a738af2b036891f437c5ceea16913fc03dd45f4122854967f887efa14e288d8758521454bbf02f2ef55c26a990210f0ea97bc2c6dbdeffa1',
    'n_mh': '8AnMkh3w0ZCUEB29UVmS2REI2zs7fjFWLecNuJ9AeTI',
    'passport_auth_status': '4e95af6632796b7d1410768600277993%2C',
    'passport_auth_status_ss': '4e95af6632796b7d1410768600277993%2C',
    'sid_guard': 'b5806e5e684bb5027770ef1d93549ede%7C1766948349%7C2592000%7CTue%2C+27-Jan-2026+18%3A59%3A09+GMT',
    'uid_tt': '3852118a00f676ae3bd1aa26ef03864b',
    'uid_tt_ss': '3852118a00f676ae3bd1aa26ef03864b',
    'sid_tt': 'b5806e5e684bb5027770ef1d93549ede',
    'sessionid': 'b5806e5e684bb5027770ef1d93549ede',
    'sessionid_ss': 'b5806e5e684bb5027770ef1d93549ede',
    'session_tlb_tag': 'sttt%7C19%7CtYBuXmhLtQJ3cO8dk1Se3v_________20vMAs8PA6QwOSge3gi6jWRwkF2KV1yUc8N9Oy5P3tGA%3D',
    'is_staff_user': 'false',
    'sid_ucp_v1': '1.0.0-KGU0MjE3YTRmODc4YzAxMTAzMWUyMDBkNmQ3MTk2Mzk2ZmUxNDE4ZDUKKAiwm7DI7M2IBRD9-8XKBhjOxiMgDCiKrrLBsKwUMPagsqcGOAJA8QcaAmhsIiBiNTgwNmU1ZTY4NGJiNTAyNzc3MGVmMWQ5MzU0OWVkZQ',
    'ssid_ucp_v1': '1.0.0-KGU0MjE3YTRmODc4YzAxMTAzMWUyMDBkNmQ3MTk2Mzk2ZmUxNDE4ZDUKKAiwm7DI7M2IBRD9-8XKBhjOxiMgDCiKrrLBsKwUMPagsqcGOAJA8QcaAmhsIiBiNTgwNmU1ZTY4NGJiNTAyNzc3MGVmMWQ5MzU0OWVkZQ',
    'passport_csrf_token': 'fb3ed69e507a1960f3eb8de15a7fe4cc',
    'passport_csrf_token_default': 'fb3ed69e507a1960f3eb8de15a7fe4cc',
    'passport_fe_beating_status': 'true',
    'ttwid': '1%7CeFOP4FN-NrAOE5JZBJLR1_kks-Ga_xcDF4YOe6fdNJ4%7C1766961984%7C7da7c3b39969f73804188a64cc2962305c619725721c093f9703c135c986f920',
    'tt_scid': 'Py.dJjHElbRFM3dJ5IZzF9fz.agqB7SkyNBhkg5CMl6VKZtFENlC6liftDGdKty6eaab',
    'msToken': 'hVPREFsRQsj4LXo9mnPFf75Dd3E1Gn1UIcaKCfkur6fY6FnV7OqPizlhefwTFwGr0w-Zc8O43sS-Z2j9jI6xOBMjtHsjAy4Ayfco2JgbZIYJL91MuHPRS7DcqKoZrJWBdfrcei4kbiOSxg==',
}

headers = {
    'accept': '*/*',
    'accept-language': 'zh-CN,zh;q=0.9',
    'agw-js-conv': 'str, str',
    'content-type': 'application/json',
    'last-event-id': 'undefined',
    'origin': 'https://www.doubao.com',
    'priority': 'u=1, i',
    'referer': 'https://www.doubao.com/chat/local_2555226682244203',
    'sec-ch-ua': '"Chromium";v="135", "Not-A.Brand";v="8"',
    'sec-ch-ua-mobile': '?0',
    'sec-ch-ua-platform': '"Windows"',
    'sec-fetch-dest': 'empty',
    'sec-fetch-mode': 'cors',
    'sec-fetch-site': 'same-origin',
    'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 SamanthaDoubao/1.77.7',
    'x-flow-trace': '04-001a492d03001cc6000fa874a330cd20-000479302e80532c-01',
    # 'cookie': 'gd_random=eyJtYXRjaCI6dHJ1ZSwicGVyY2VudCI6MC4yMDAwNTU4NzU5OTcyMjQ0fQ==.n+bTAtBr7GvakgHXe1U13Nk1XERb2jg/0uYwkpHsw3Q=; i18next=zh; flow_ssr_sidebar_expand=1; s_v_web_id=verify_mjq3ey5q_Lj1nCj1r_D0Gm_4tNR_8pam_GN7DVHiMj31h; passport_mfa_token=CjaWFSB4QhRPWaoM1lws%2F1ABeGKzq0mQMrutjv4WENW01%2BV7fldO93vPCN7bc%2FS9t3%2FXsUzR9mAaSgo8AAAAAAAAAAAAAE%2FiQS7dozEqVT9%2Be7Ujt2tJB6O9BDjVo2ltqhZJzFJwqG4ovBHVi96ZsepmujtATRGeEI%2B2hQ4Y9rHRbCACIgEDlrDi8Q%3D%3D; d_ticket=d0751484469188c6ac674ccb424a6ab71947b; odin_tt=e8d2f21367fbecb16d1171eeea5cef74515a889aacd49c37a738af2b036891f437c5ceea16913fc03dd45f4122854967f887efa14e288d8758521454bbf02f2ef55c26a990210f0ea97bc2c6dbdeffa1; n_mh=8AnMkh3w0ZCUEB29UVmS2REI2zs7fjFWLecNuJ9AeTI; passport_auth_status=4e95af6632796b7d1410768600277993%2C; passport_auth_status_ss=4e95af6632796b7d1410768600277993%2C; sid_guard=b5806e5e684bb5027770ef1d93549ede%7C1766948349%7C2592000%7CTue%2C+27-Jan-2026+18%3A59%3A09+GMT; uid_tt=3852118a00f676ae3bd1aa26ef03864b; uid_tt_ss=3852118a00f676ae3bd1aa26ef03864b; sid_tt=b5806e5e684bb5027770ef1d93549ede; sessionid=b5806e5e684bb5027770ef1d93549ede; sessionid_ss=b5806e5e684bb5027770ef1d93549ede; session_tlb_tag=sttt%7C19%7CtYBuXmhLtQJ3cO8dk1Se3v_________20vMAs8PA6QwOSge3gi6jWRwkF2KV1yUc8N9Oy5P3tGA%3D; is_staff_user=false; sid_ucp_v1=1.0.0-KGU0MjE3YTRmODc4YzAxMTAzMWUyMDBkNmQ3MTk2Mzk2ZmUxNDE4ZDUKKAiwm7DI7M2IBRD9-8XKBhjOxiMgDCiKrrLBsKwUMPagsqcGOAJA8QcaAmhsIiBiNTgwNmU1ZTY4NGJiNTAyNzc3MGVmMWQ5MzU0OWVkZQ; ssid_ucp_v1=1.0.0-KGU0MjE3YTRmODc4YzAxMTAzMWUyMDBkNmQ3MTk2Mzk2ZmUxNDE4ZDUKKAiwm7DI7M2IBRD9-8XKBhjOxiMgDCiKrrLBsKwUMPagsqcGOAJA8QcaAmhsIiBiNTgwNmU1ZTY4NGJiNTAyNzc3MGVmMWQ5MzU0OWVkZQ; passport_csrf_token=fb3ed69e507a1960f3eb8de15a7fe4cc; passport_csrf_token_default=fb3ed69e507a1960f3eb8de15a7fe4cc; passport_fe_beating_status=true; ttwid=1%7CeFOP4FN-NrAOE5JZBJLR1_kks-Ga_xcDF4YOe6fdNJ4%7C1766961984%7C7da7c3b39969f73804188a64cc2962305c619725721c093f9703c135c986f920; tt_scid=Py.dJjHElbRFM3dJ5IZzF9fz.agqB7SkyNBhkg5CMl6VKZtFENlC6liftDGdKty6eaab; msToken=hVPREFsRQsj4LXo9mnPFf75Dd3E1Gn1UIcaKCfkur6fY6FnV7OqPizlhefwTFwGr0w-Zc8O43sS-Z2j9jI6xOBMjtHsjAy4Ayfco2JgbZIYJL91MuHPRS7DcqKoZrJWBdfrcei4kbiOSxg==',
}

params = {
    'aid': '582478',
    'chromium_version': '135.0.7049.72',
    'client_platform': 'pc_client',
    'device_id': '89485780752138',
    'device_platform': 'web',
    'fp': 'verify_mjq3ey5q_Lj1nCj1r_D0Gm_4tNR_8pam_GN7DVHiMj31h',
    'language': 'zh',
    'pc_version': '1.77.7',
    'pkg_type': 'release_version',
    'real_aid': '582478',
    'region': '',
    'runtime': 'web',
    'runtime_version': '2.51.0',
    'samantha_web': '1',
    'sys_region': '',
    'tea_uuid': '89485780752138',
    'use-olympus-account': '1',
    'version_code': '20800',
    'web_id': '7574303080830486031',
    'web_tab_id': 'aa472a1d-6066-4fe6-89a9-ded878993f67',
    'msToken': 'S6oDeYZGB9OMtCMrKwaUmf091TJjn6tg00N0kJrU0vRzfI52gFaSs_Jodu1LOMJGisA5eOHvpOtrSq6oUcaRsBEQejCDPLah3O0cFiFQAnEUnKDdEkKDRCDoSTAbLdLyeHWSwS0RMl7BCG9MFEa0OnNGksU4bQtAIIHpfEJg6twlr5pg-hyOdLk=',
    'a_bogus': 'Qy4VDe67Q2/fadMGYcDqHvH1TLnMNPSyHMiOWPPR9KP9c1eaK2q0OSm0GoiZex7fqWD9FFeHI3cfKndGzu3k18opzspkuN4fis/II78oMqZZYPJ27qWTCjtNLJkKlW4Ym55ti2hRIG0qZxQ19r9YAp-JL/Uj5mmZsq-GV2TtEIYsUSujh9/CaVydPhwqND==',
}

json_data = {
    'messages': [
        {
            'content': '{"text":"一只深红色的猫在跳水 ，比例 「9:16」","ratio":"9:16"}',
            'content_type': 2020,
            'attachments': [],
        },
    ],
    'completion_option': {
        'is_regen': False,
        'with_suggest': False,
        'need_create_conversation': True,
        'launch_stage': 1,
        'is_replace': False,
        'is_delete': False,
        'is_ai_playground': False,
        'message_from': 0,
        'action_bar_skill_id': 17,
        'use_auto_cot': False,
        'resend_for_regen': False,
        'enable_commerce_credit': False,
        'event_id': '0',
    },
    'evaluate_option': {
        'web_ab_params': '',
    },
    'conversation_id': '0',
    'local_conversation_id': 'local_2555226682244203',
    'local_message_id': '48bd22c0-e440-11f0-be2d-ff64e57955d7',
}

response = requests.post(
    'https://www.doubao.com/samantha/chat/completion',
    params=params,
    cookies=cookies,
    headers=headers,
    json=json_data,
)

# Note: json_data will not be serialized by requests
# exactly as it was in the original request.
#data = '{"messages":[{"content":"{\\"text\\":\\"一只深红色的猫在跳水 ，比例 「9:16」\\",\\"ratio\\":\\"9:16\\"}","content_type":2020,"attachments":[]}],"completion_option":{"is_regen":false,"with_suggest":false,"need_create_conversation":true,"launch_stage":1,"is_replace":false,"is_delete":false,"is_ai_playground":false,"message_from":0,"action_bar_skill_id":17,"use_auto_cot":false,"resend_for_regen":false,"enable_commerce_credit":false,"event_id":"0"},"evaluate_option":{"web_ab_params":""},"conversation_id":"0","local_conversation_id":"local_2555226682244203","local_message_id":"48bd22c0-e440-11f0-be2d-ff64e57955d7"}'.encode()
#response = requests.post(
#    'https://www.doubao.com/samantha/chat/completion',
#    params=params,
#    cookies=cookies,
#    headers=headers,
#    data=data,
#)