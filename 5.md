import requests

cookies = {
    'gd_random': 'eyJtYXRjaCI6dHJ1ZSwicGVyY2VudCI6MC4yMDAwNTU4NzU5OTcyMjQ0fQ==.n+bTAtBr7GvakgHXe1U13Nk1XERb2jg/0uYwkpHsw3Q=',
    'i18next': 'zh',
    'flow_ssr_sidebar_expand': '1',
    's_v_web_id': 'verify_mjq3ey5q_Lj1nCj1r_D0Gm_4tNR_8pam_GN7DVHiMj31h',
    'passport_mfa_token': 'CjaWFSB4QhRPWaoM1lws%2F1ABeGKzq0mQMrutjv4WENW01%2BV7fldO93vPCN7bc%2FS9t3%2FXsUzR9mAaSgo8AAAAAAAAAAAAAE%2FiQS7dozEqVT9%2Be7Ujt2tJB6O9BDjVo2ltqhZJzFJwqG4ovBHVi96ZsepmujtATRGeEI%2B2hQ4Y9rHRbCACIgEDlrDi8Q%3D%3D',
    'd_ticket': 'd0751484469188c6ac674ccb424a6ab71947b',
    'odin_tt': 'e8d2f21367fbecb16d1171eeea5cef74515a889aacd49c37a738af2b036891f437c5ceea16913fc03dd45f4122854967f887efa14e288d8758521454bbf02f2ef55c26a990210f0ea97bc2c6dbdeffa1',
    'n_mh': '8AnMkh3w0ZCUEB29UVmS2REI2zs7fjFWLecNuJ9AeTI',
    'passport_auth_status': '4e95af6632796b7d1410768600277993%2C',
    'passport_auth_status_ss': '4e95af6632796b7d1410768600277993%2C',
    'sid_guard': 'b5806e5e684bb5027770ef1d93549ede%7C1766948349%7C2592000%7CTue%2C+27-Jan-2026+18%3A59%3A09+GMT',
    'uid_tt': '3852118a00f676ae3bd1aa26ef03864b',
    'uid_tt_ss': '3852118a00f676ae3bd1aa26ef03864b',
    'sid_tt': 'b5806e5e684bb5027770ef1d93549ede',
    'sessionid': 'b5806e5e684bb5027770ef1d93549ede',
    'sessionid_ss': 'b5806e5e684bb5027770ef1d93549ede',
    'session_tlb_tag': 'sttt%7C19%7CtYBuXmhLtQJ3cO8dk1Se3v_________20vMAs8PA6QwOSge3gi6jWRwkF2KV1yUc8N9Oy5P3tGA%3D',
    'is_staff_user': 'false',
    'sid_ucp_v1': '1.0.0-KGU0MjE3YTRmODc4YzAxMTAzMWUyMDBkNmQ3MTk2Mzk2ZmUxNDE4ZDUKKAiwm7DI7M2IBRD9-8XKBhjOxiMgDCiKrrLBsKwUMPagsqcGOAJA8QcaAmhsIiBiNTgwNmU1ZTY4NGJiNTAyNzc3MGVmMWQ5MzU0OWVkZQ',
    'ssid_ucp_v1': '1.0.0-KGU0MjE3YTRmODc4YzAxMTAzMWUyMDBkNmQ3MTk2Mzk2ZmUxNDE4ZDUKKAiwm7DI7M2IBRD9-8XKBhjOxiMgDCiKrrLBsKwUMPagsqcGOAJA8QcaAmhsIiBiNTgwNmU1ZTY4NGJiNTAyNzc3MGVmMWQ5MzU0OWVkZQ',
    'passport_fe_beating_status': 'true',
    'tt_scid': 'cG87mSmP5B1FnxbkOFSgWxWGBUjzng2kPrAp8NNSxoE1zRXJEsAjTPSaepQFpxiP0a97',
    'ttwid': '1%7CeFOP4FN-NrAOE5JZBJLR1_kks-Ga_xcDF4YOe6fdNJ4%7C1766959586%7C05ea873a80dc6c8a475416c375a626abfffc563b3ddcef6493e5ed3d0e4a5c4b',
    'passport_csrf_token': 'fb3ed69e507a1960f3eb8de15a7fe4cc',
    'passport_csrf_token_default': 'fb3ed69e507a1960f3eb8de15a7fe4cc',
    'msToken': 'x_E3RJiL3pJmawuf4iLt87i8hvQndIyJB6UQN4MY4xVrXZ8mr-nzqf_yC1BMjcIgfE58CA6cX5jg3yKdKYek5t9d9_zPM15p3j69wJqNPDi3LmKDMRQsj5QuS26y5WE6euCDUsZT2F_5_Q==',
}

headers = {
    'accept': 'application/json, text/plain, */*',
    'accept-language': 'zh-CN,zh;q=0.9',
    'agw-js-conv': 'str',
    'content-type': 'application/json; encoding=utf-8',
    'origin': 'https://www.doubao.com',
    'priority': 'u=1, i',
    'referer': 'https://www.doubao.com/chat/34350139987993090',
    'sec-ch-ua': '"Chromium";v="135", "Not-A.Brand";v="8"',
    'sec-ch-ua-mobile': '?0',
    'sec-ch-ua-platform': '"Windows"',
    'sec-fetch-dest': 'empty',
    'sec-fetch-mode': 'cors',
    'sec-fetch-site': 'same-origin',
    'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 SamanthaDoubao/1.77.7',
    # 'cookie': 'gd_random=eyJtYXRjaCI6dHJ1ZSwicGVyY2VudCI6MC4yMDAwNTU4NzU5OTcyMjQ0fQ==.n+bTAtBr7GvakgHXe1U13Nk1XERb2jg/0uYwkpHsw3Q=; i18next=zh; flow_ssr_sidebar_expand=1; s_v_web_id=verify_mjq3ey5q_Lj1nCj1r_D0Gm_4tNR_8pam_GN7DVHiMj31h; passport_mfa_token=CjaWFSB4QhRPWaoM1lws%2F1ABeGKzq0mQMrutjv4WENW01%2BV7fldO93vPCN7bc%2FS9t3%2FXsUzR9mAaSgo8AAAAAAAAAAAAAE%2FiQS7dozEqVT9%2Be7Ujt2tJB6O9BDjVo2ltqhZJzFJwqG4ovBHVi96ZsepmujtATRGeEI%2B2hQ4Y9rHRbCACIgEDlrDi8Q%3D%3D; d_ticket=d0751484469188c6ac674ccb424a6ab71947b; odin_tt=e8d2f21367fbecb16d1171eeea5cef74515a889aacd49c37a738af2b036891f437c5ceea16913fc03dd45f4122854967f887efa14e288d8758521454bbf02f2ef55c26a990210f0ea97bc2c6dbdeffa1; n_mh=8AnMkh3w0ZCUEB29UVmS2REI2zs7fjFWLecNuJ9AeTI; passport_auth_status=4e95af6632796b7d1410768600277993%2C; passport_auth_status_ss=4e95af6632796b7d1410768600277993%2C; sid_guard=b5806e5e684bb5027770ef1d93549ede%7C1766948349%7C2592000%7CTue%2C+27-Jan-2026+18%3A59%3A09+GMT; uid_tt=3852118a00f676ae3bd1aa26ef03864b; uid_tt_ss=3852118a00f676ae3bd1aa26ef03864b; sid_tt=b5806e5e684bb5027770ef1d93549ede; sessionid=b5806e5e684bb5027770ef1d93549ede; sessionid_ss=b5806e5e684bb5027770ef1d93549ede; session_tlb_tag=sttt%7C19%7CtYBuXmhLtQJ3cO8dk1Se3v_________20vMAs8PA6QwOSge3gi6jWRwkF2KV1yUc8N9Oy5P3tGA%3D; is_staff_user=false; sid_ucp_v1=1.0.0-KGU0MjE3YTRmODc4YzAxMTAzMWUyMDBkNmQ3MTk2Mzk2ZmUxNDE4ZDUKKAiwm7DI7M2IBRD9-8XKBhjOxiMgDCiKrrLBsKwUMPagsqcGOAJA8QcaAmhsIiBiNTgwNmU1ZTY4NGJiNTAyNzc3MGVmMWQ5MzU0OWVkZQ; ssid_ucp_v1=1.0.0-KGU0MjE3YTRmODc4YzAxMTAzMWUyMDBkNmQ3MTk2Mzk2ZmUxNDE4ZDUKKAiwm7DI7M2IBRD9-8XKBhjOxiMgDCiKrrLBsKwUMPagsqcGOAJA8QcaAmhsIiBiNTgwNmU1ZTY4NGJiNTAyNzc3MGVmMWQ5MzU0OWVkZQ; passport_fe_beating_status=true; tt_scid=cG87mSmP5B1FnxbkOFSgWxWGBUjzng2kPrAp8NNSxoE1zRXJEsAjTPSaepQFpxiP0a97; ttwid=1%7CeFOP4FN-NrAOE5JZBJLR1_kks-Ga_xcDF4YOe6fdNJ4%7C1766959586%7C05ea873a80dc6c8a475416c375a626abfffc563b3ddcef6493e5ed3d0e4a5c4b; passport_csrf_token=fb3ed69e507a1960f3eb8de15a7fe4cc; passport_csrf_token_default=fb3ed69e507a1960f3eb8de15a7fe4cc; msToken=x_E3RJiL3pJmawuf4iLt87i8hvQndIyJB6UQN4MY4xVrXZ8mr-nzqf_yC1BMjcIgfE58CA6cX5jg3yKdKYek5t9d9_zPM15p3j69wJqNPDi3LmKDMRQsj5QuS26y5WE6euCDUsZT2F_5_Q==',
}

params = {
    'version_code': '20800',
    'language': 'zh',
    'device_platform': 'web',
    'aid': '582478',
    'real_aid': '582478',
    'pkg_type': 'release_version',
    'device_id': '89485780752138',
    'pc_version': '1.77.7',
    'web_id': '7574303080830486031',
    'tea_uuid': '89485780752138',
    'region': '',
    'sys_region': '',
    'samantha_web': '1',
    'use-olympus-account': '1',
    'runtime': 'web',
    'runtime_version': '2.51.0',
    'client_platform': 'pc_client',
    'chromium_version': '135.0.7049.72',
    'fp': 'verify_7574303080830486031',
    'web_tab_id': 'f318a611-4355-4eb1-a96a-6178128d874b',
}

json_data = {
    'cmd': 3100,
    'uplink_body': {
        'pull_singe_chain_uplink_body': {
            'conversation_id': '34350139987993090',
            'anchor_index': 9007199254740991,
            'conversation_type': 3,
            'direction': 1,
            'limit': 50,
            'ext': {
                'pull_single_chain_scene': 'multi_device_red_dot_sync',
            },
            'filter': {
                'index_list': [],
            },
        },
    },
    'sequence_id': '2bcc6ee6-0e5b-4fb4-80f7-3bbd564d72a3',
    'channel': 2,
    'version': '1',
}

response = requests.post('https://www.doubao.com/im/chain/single', params=params, cookies=cookies, headers=headers, json=json_data)

# Note: json_data will not be serialized by requests
# exactly as it was in the original request.
#data = '{"cmd":3100,"uplink_body":{"pull_singe_chain_uplink_body":{"conversation_id":"34350139987993090","anchor_index":9007199254740991,"conversation_type":3,"direction":1,"limit":50,"ext":{"pull_single_chain_scene":"multi_device_red_dot_sync"},"filter":{"index_list":[]}}},"sequence_id":"2bcc6ee6-0e5b-4fb4-80f7-3bbd564d72a3","channel":2,"version":"1"}'
#response = requests.post('https://www.doubao.com/im/chain/single', params=params, cookies=cookies, headers=headers, data=data)